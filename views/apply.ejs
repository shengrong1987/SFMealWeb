
<div class="text-center base_container" style="margin-top:-20px;">
  <div class="row">
    <div class="pure-banner vertical-align green">
      <div style="width: 600px;" class="middle banner-text">
        <div class="row vertical-align" style="margin-bottom: 5px;">
          <div class="col-sm-3">
            <a href="/" class="logo logo-sm"></a>
          </div>
          <div class="col-sm-9">
            <h4 class="text-white"><strong><%= __('welcome') %></strong></h4>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div id="applyView" class="default-container">
    <div class="box white">
      <h4 class="text-green"><%= __('apply-title') %></h4>

      <hr>

      <div class="progress">
        <div class="progress-bar progress-bar-success" role="progressbar" aria-valuenow="1" aria-valuemin="1" aria-valuemax="5" style="width: 20%;">
          <%= __('step-%d-of-%d',1,5)%>
        </div>
      </div>

      <div class="navbar">
        <div class="navbar-inner">
          <ul class="nav nav-pills">
            <li class="active"><a href="#step1" data-toggle="tab" data-pass="<%= user.host || ''%>" data-step="1"><%= __('step1')%></a></li>
            <li><a href="#step2" data-toggle="tab" data-pass="<%= hasAddress%>" data-step="2"><%= __('step2')%></a></li>
            <li><a href="#step3" data-toggle="tab" data-pass="<%= hasDish%>" data-step="3"><%= __('step3')%></a></li>
            <li><a href="#step4" data-toggle="tab" data-pass="<%= hasMeal%>" data-step="4"><%= __('step4')%></a></li>
            <li><a href="#step5" data-toggle="tab" data-pass="<%= hasAccount%>" data-step="5"><%= __('step5')%></a></li>
          </ul>
        </div>
      </div>
      <div class="tab-content">
        <div class="tab-pane fade in active" id="step1">

          <% if( typeof user.host !== 'undefined' && user.host){%>
            <div class="well">
              <label><%= __('step1-success')%></label>
              <br>
              <h4><small><%= __('step1-success-tip')%></small></h4>
            </div>
            <icon class="fa fa-check text-green"></icon>
            <button class="btn btn-default round next"><%= __('continue')%></button>
          <%}else{%>
            <div class="well">
              <label><%= __('step1-ongoing')%></label>
              <br>
              <h4><small><%= __('step1-ongoing-tip')%></small></h4>
            </div>
            <button id="applyBtn" class="btn btn-info round"><%= __('step1-action-btn')%></button>
          <%}%>
        </div>

        <div class="tab-pane fade" id="step2">

          <% if( hasAddress ){%>
          <div class="well">
            <label><%= __('step2-success')%></label>
            <br>
            <h4><small><%= __('step2-success-tip')%></small></h4>
          </div>
          <icon class="fa fa-check text-green"></icon>
          <button class="btn btn-default round next"><%= __('continue')%></button>
          <%}else{%>
          <div class="well">
            <label><%= __('step2-ongoing')%></label>
          </div>
          <a target="_blank" href="/user/me#myaddress" class="btn btn-info round"><%= __('step2-action-btn')%></a>
          <%}%>

        </div>

        <div class="tab-pane fade" id="step3">

          <% if( hasDish ){%>
          <div class="well">
            <label><%= __('step3-success')%></label>
            <h4><small><%= __('step3-success-tip')%></small></h4>
          </div>
          <icon class="fa fa-check text-green"></icon>
          <button class="btn btn-default round next"><%= __('continue')%></button>
          <%}else{%>
          <div class="well">
            <label><%= __('step3-ongoing')%></label>
            <h4><small><%= __('step3-ongoing-tip')%></small></h4>
          </div>
          <a target="_blank" href="/host/me/createDish" class="btn btn-info round"><%= __('step3-action-btn')%></a>
          <%}%>

        </div>

        <div class="tab-pane fade" id="step4">

          <% if( hasMeal ){%>
          <div class="well">
            <label><%= __('step4-success')%></label>
            <h4><small><%= __('step4-success-tip')%></small></h4>
          </div>
          <icon class="fa fa-check text-green"></icon>
          <button class="btn btn-default round next"><%= __('continue')%></button>
          <%}else{%>
          <div class="well">
            <label><%= __('step4-ongoing')%></label>
            <h4><small><%= __('step4-ongoing-tip')%></small></h4>
          </div>
          <a target="_blank" href="/host/me/createMeal" class="btn btn-info round"><%= __('step4-action-btn')%></a>
          <%}%>

        </div>

        <div class="tab-pane fade" id="step5">

          <% if( hasAccount ){%>
          <div class="well">
            <label><%= __('step5-success')%></label>
            <h4><small><%= __('step5-success-tip')%></small></h4>
          </div>
          <icon class="fa fa-check text-green"></icon>
          <a href="/host/me#mymeal" class="btn btn-default round"><%= __('complete')%></a>
          <%}else{%>
          <div class="well">
            <label><%= __('step5-ongoing')%></label>
            <h4><small><%= __('step5-ongoing-tip')%></small></h4>
          </div>
          <a target="_blank" href="/user/pocket#mypurse" class="btn btn-info round"><%= __('step5-action-btn')%></a>
          <%}%>

        </div>
      </div>
    </div>
  </div>
</div>

<script>

  $('.next').click(function(){
    var nextId = $(this).parents('.tab-pane').next().attr("id");
    $('[href=#'+nextId+']').tab('show');
    return false;
  })

  $('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
    //update progress
    var step = $(e.target).data('step');
    var percent = (parseInt(step) / 5) * 100;
    $('.progress-bar').css({width: percent + '%'});

    <% if(req.getLocale() == 'zh'){%>
    $('.progress-bar').text("步骤 " + step + " / " + 5);
    <%}else{%>
    $('.progress-bar').text("step " + step + " of " + 5);
    <%}%>
    //e.relatedTarget // previous tab
  })

  new ApplyView({el : $("#applyView"), model : new Host()});
</script>
